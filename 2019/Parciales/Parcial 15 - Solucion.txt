ORG 1000H
TABLA1 DW 1,2,3,4,5
TABLA2 DW 5,4,3,2,1
CEROS DB ?						

ORG 3000H
RESTA: PUSH DX ; POR REUSO
PUSH BX ; PARA NO PERDER PARAMETRO VIA REGISTRO
MOV BX,SP
ADD BX,6

MOV DX,[BX] ; TOMO EL PARAMETRO POR VALOR
POP BX ; RECUPERO EL VALOR VIA REGISTRO
SUB [BX], DX ; HAGO LA RESTA
JNS FINR
MOV  WORD PTR [BX], 0
FINR: POP DX ; DEJO INTACTO EL VALOR DE DX DEL PROGRAMA
RET

ORG 2000H
MOV AX, OFFSET TABLA1 ; REF
MOV BX, OFFSET TABLA2; VALOR
MOV DL, OFFSET TABLA2 - OFFSET TABLA1
MOV DH, 0
BUCLE: 	CMP DL, 0
JZ FIN
MOV CX, [BX] ; PARAMETRO POR VALOR
PUSH BX
MOV BX, AX ; PARAMETRO POR REFERENCIA
PUSH CX 
; Enviar parámetros
CALL RESTA
; Volver de la subrutina
POP CX
CMP WORD PTR [BX], 0 ; Comparo para ceros
POP BX
JNZ SIGO
INC DH
SIGO: ADD BX, 2
ADD AX, 2
SUB DL, 2
JMP BUCLE
FIN:	MOV CEROS, DH
HLT
END 